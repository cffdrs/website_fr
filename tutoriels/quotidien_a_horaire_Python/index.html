<!DOCTYPE html>
<html lang="fr" data-bs-theme="dark">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>quotidien a horaire Python - PG-MCEDIF</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" disabled>
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" >
        <link href="../../style.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script>
    <base target="_blank">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=DM+Mono:wght@400&family=Roboto+Mono&display=swap');
    </style>
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
    <a class="navbar-brand" href="../.." target="_self">PG-MCEDIF</a>
    <a class="navbar-brand" href="../.." target="_self"> <img style="height: 40px; margin: 0px; padding: 0px;" src="/website_fr/img/CFFDRS_Black_4.png" alt="CFFDRS logo"> </img> </a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
        <!-- Main navigation -->
        <ul class="nav navbar-nav">
            <li class="nav-item">
                <a href="../../accueil/" class="nav-link" target="_self">Accueil</a>
            </li>
            <li class="nav-item">
                <a href="../../code/" class="nav-link" target="_self">Code</a>
            </li>
            <li class="nav-item">
                <a href="../" class="nav-link active" target="_self">Tutoriels</a>
            </li>
            <li class="nav-item">
                <a href="../../ressources/" class="nav-link" target="_self">Ressources</a>
            </li>
            <li class="nav-item">
                <a href="../../contact/" class="nav-link" target="_self">Contact</a>
            </li>
        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Rechercher
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <script src="../../js/darkmode.js"></script>

        <div class="container">
            <div class="row">
    <!-- Construction Sign -->
    <style>
        div.construction p {
            text-align: center;
            font-family: Times;
            font-size: 16px;
            font-style: normal;
            font-weight: bold;
            text-decoration: none;
            text-transform: uppercase;
        }
    </style>

    <!-- <div class="construction">
        <p>Le site Web est toujours en développement. Les problèmes ou commentaires peuvent être envoyés à <a href="mailto:kevin.siu@nrcan-rncan.gc.ca" target="_self">kevin.siu@nrcan-rncan.gc.ca</a></p>
    </div> -->
    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table des matières">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1">
                    <a href="#" class="nav-link" target="_self"> (Début) </a>
                <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2">
                    <a href="#python-files" class="nav-link" target="_self">Python files</a>
                <ul class="nav flex-column">
                </ul>
            </li>
            <li class="nav-item" data-bs-level="2">
                    <a href="#data" class="nav-link" target="_self">Data</a>
                <ul class="nav flex-column">
                </ul>
            </li>
            <li class="nav-item" data-bs-level="2">
                    <a href="#steps" class="nav-link" target="_self">Steps</a>
                <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="3">
                    <a href="#load-packages" class="nav-link" target="_self">Load packages</a>
                <ul class="nav flex-column">
                </ul>
            </li>
            <li class="nav-item" data-bs-level="3">
                    <a href="#load-functions-and-data" class="nav-link" target="_self">Load functions and data</a>
                <ul class="nav flex-column">
                </ul>
            </li>
            <li class="nav-item" data-bs-level="3">
                    <a href="#convert-daily-to-minmax" class="nav-link" target="_self">Convert daily to minmax</a>
                <ul class="nav flex-column">
                </ul>
            </li>
            <li class="nav-item" data-bs-level="3">
                    <a href="#convert-minmax-to-hourly" class="nav-link" target="_self">Convert minmax to hourly</a>
                <ul class="nav flex-column">
                </ul>
            </li>
                </ul>
            </li>
            <li class="nav-item" data-bs-level="2">
                    <a href="#appendix-minmax-to-hourly-parameters" class="nav-link" target="_self">Appendix: Minmax to Hourly Parameters</a>
                <ul class="nav flex-column">
                </ul>
            </li>
                </ul>
            </li>
        </ul>
    </div>
</div></div>
    <div class="col-md-9" role="main">

<p><a href="../../tutoriels#daily-to-hourly" target="_self" style="float: left;"> retour à Tutoriels </a>
<a href="https://cffdrs.github.io/website_en/tutorials/Daily_to_Hourly_Python" target="_self" style="float: right;"> English </a></p>
<h3 style="text-align: center; font-style: italic;"> Traduction en cours </h3>

<p><br></p>
<h1 id="daily-to-hourly-tutorial-python">Daily to Hourly Tutorial - Python</h1>
<p><em>Last updated: February 27th, 2026</em></p>
<h2 id="python-files">Python files</h2>
<p>The following files can be found on the <a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/tree/main">cffdrs-ng GitHub repository</a>:  </p>
<ul>
<li>data/<ul>
<li><a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/blob/main/data/PRF2007_daily_wx.csv"><strong>PRF2007_daily_wx.csv</strong></a></li>
</ul>
</li>
<li>FWI/<ul>
<li>Python/<ul>
<li>tutorial/<ul>
<li><a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/blob/main/FWI/Python/tutorial/tutorial_daily_to_hourly.py"><strong>tutorial_daily_to_hourly.py</strong></a></li>
</ul>
</li>
<li><a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/blob/main/FWI/Python/make_hourly.py"><strong>make_hourly.py</strong></a></li>
<li><a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/blob/main/FWI/Python/make_minmax.py"><strong>make_minmax.py</strong></a></li>
<li><a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/blob/main/FWI/Python/util.py"><strong>util.py</strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>If you are unfamiliar with GitHub, there are many options for you to retrieve the code and data files:</p>
<ol>
<li><em>Download each file</em> to your computer individually. On the file's GitHub page (e.g. <a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/blob/main/data/PRF2007_daily_wx.csv"><strong>PRF2007_daily_wx.csv</strong></a>), find the "More file actions" button at the top-right side of the website (denoted "..."), and select "Download". This will begin downloading based on your browser settings. Repeat this for every file.</li>
<li><em>Download the whole repository</em> to your computer. See the <a href="https://docs.github.com/en/get-started/start-your-journey/downloading-files-from-github">GitHub documentation</a> for more information.</li>
<li><em>Clone</em> the whole repository to your computer with Git. See the <a href="https://docs.github.com/en/get-started/start-your-journey/downloading-files-from-github">GitHub documentation</a> for more information.</li>
<li><em>Fork</em> the repository to create a new repository on GitHub. See the <a href="https://docs.github.com/en/get-started/start-your-journey/downloading-files-from-github">GitHub documentation</a> for more information.</li>
</ol>
<h2 id="data">Data</h2>
<p><strong>PRF2007_daily_wx.csv</strong> contains daily weather which was reduced from hourly data specifically for this tutorial. Temperature, relative humidity, and wind speed data are taken from noon Local Standard Time (LST), or in this case the equivalent 13:00 Local Daylight Time (LDT). Hourly precipitation is summed over 24 hours ending at the same hour as the other weather variables. The original hourly data is from a Petawawa Research Forest (PRF) weather station during the 2007 field season. The data has no gaps and is sorted sequentially by time, which are requirements for the input data.</p>
<p>Columns that are included and required for converting daily weather data to daily high and low (minmax) data are: year (<code>yr</code>), month (<code>mon</code>), day (<code>day</code>), temperature [°C] (<code>temp</code>), relative humidity [%] (<code>rh</code>), wind speed [km/h] (<code>ws</code>), and daily precipitation [mm] (<code>prec</code>).</p>
<p>Columns that are required for converting daily minmax data to hourly data are: the output columns from converting daily to minmax, latitude [DD] (<code>lat</code>), longitude [DD] (<code>long</code>), and UTC offset [hr] (<code>timezone</code>). One UTC offset value can be specified instead of the column input in the <code>make_hourly()</code> function.</p>
<p>A station ID (<code>id</code>) column is not required if all data is from the same station/location, but is provided in this dataset for clarity.</p>
<h2 id="steps">Steps</h2>
<p>Open the <strong>tutorial_daily_to_hourly.py</strong> code file. You can either follow the code and comments in the file or continue on this page (both include the same code and content).</p>
<h3 id="load-packages">Load packages</h3>
<p>Run <code>pip install</code> to install packages if you are missing <a href="https://pandas.pydata.org/docs/getting_started/install.html#installing-from-pypi">pandas</a>.</p>
<pre><code class="language-py">import pandas as pd
import sys
</code></pre>
<h3 id="load-functions-and-data">Load functions and data</h3>
<p>This tutorial will refer to file locations as structured in the GitHub repository. Specify the local path to the cffdrs-ng folder. It can accept absolute paths (e.g. starting with "C:/") or relative paths (e.g. "./" if the working directory is cffdrs-ng). Change the path strings to match your file layout if it is different.</p>
<pre><code class="language-py">path_prefix = &quot;CHANGE/TO/PATH/TO/cffdrs-ng/&quot;
sys.path.append(path_prefix + &quot;FWI/Python&quot;)
</code></pre>
<p>Load the files containing the functions to calculate hourly weather.</p>
<pre><code class="language-py">from make_minmax import daily_to_minmax
from make_hourly import minmax_to_hourly
</code></pre>
<p>Load the input daily weather data file.</p>
<pre><code class="language-py">daily = pd.read_csv(path_prefix + &quot;data/PRF2007_daily_wx.csv&quot;)
</code></pre>
<p>Print the column names, data should contain 11 columns.</p>
<pre><code class="language-py">print(daily.columns)
</code></pre>
<pre><code class="language-py">Index(['id', 'lat', 'long', 'timezone', 'yr', 'mon', 'day', 'temp', 'rh', 'ws',
       'prec'],
      dtype='object')
</code></pre>
<h3 id="convert-daily-to-minmax">Convert daily to minmax</h3>
<p>If you already have daily minmax data (from observations or modelling) then you can skip to <a href="#convert-minmax-to-hourly" target="_self">converting minmax to hourly</a>. <code>daily_to_minmax()</code> is the function that calculates daily minmax data from daily weather data. For details you can run the help.</p>
<pre><code class="language-py">help(daily_to_minmax)
</code></pre>
<pre><code class="language-py">Help on function daily_to_minmax in module make_minmax:

daily_to_minmax(df, silent=False, round_out=4)
    ##
    # Convert daily noon weather to daily min/max weather using statistical values
    #
    # @param    df          daily noon LST weather stream, columns:
    #                       yr, mon, day, temp, rh, ws, prec
    # @param    silent      suppresses informative print statements (default False)
    # @param    round_out   decimals to truncate output to, None for none (default 4)        
    # @return               daily min/max weather stream, columns:
    #                       yr, mon, day, temp_min, temp_max, rh_min, rh_max,
    #                       ws_min, ws_max, prec
</code></pre>
<p>For this tutorial, we will leave all optional parameters to default.</p>
<pre><code class="language-py">minmax = daily_to_minmax(daily)
</code></pre>
<pre><code class="language-py">########
FWI2025: Make Min/Max Inputs (YYYY-MM-DD)

Predicting daily min/max weather
########
</code></pre>
<p>Output is a DataFrame, with the following columns:</p>
<pre><code class="language-py">print(minmax.columns)
</code></pre>
<pre><code class="language-py">Index(['id', 'lat', 'long', 'timezone', 'yr', 'mon', 'day', 'temp_min',
       'temp_max', 'rh_min', 'rh_max', 'ws_min', 'ws_max', 'prec'],
      dtype='object')
</code></pre>
<p>Print the last two rows of the minmax weather data.</p>
<pre><code class="language-py">print(minmax.tail(2).loc[:, &quot;yr&quot;:])
</code></pre>
<pre><code class="language-py">       yr  mon  day  temp_min  temp_max   rh_min  rh_max  ws_min  ws_max  prec
107  2007    8   26    9.4176     22.56  46.6648   100.0  1.8030  15.025  10.7
108  2007    8   27   10.2418     23.59  46.8248   100.0  1.0134   8.445   0.0
</code></pre>
<p>You can save the daily minmax data as a CSV file (overrides any preexisting file).</p>
<pre><code class="language-py">minmax.to_csv(path_prefix + &quot;PRF2007_calculated_minmax_wx.csv&quot;, index = False)
</code></pre>
<h3 id="convert-minmax-to-hourly">Convert minmax to hourly</h3>
<p>Next, convert the daily minmax weather data to hourly weather data that can be used to calculate <a href="../../tutorials#hourly-fwi"; target="_self">hourly FWI</a>. Run the help for details about the <code>minmax_to_hourly()</code> function.</p>
<pre><code class="language-py">help(minmax_to_hourly)
</code></pre>
<pre><code class="language-py">Help on function minmax_to_hourly in module make_hourly:

minmax_to_hourly(
    w,
    timezone=None,
    prec_hr='sunrise',
    skip_invalid=False,
    verbose=False,
    silent=False,
    round_out=4
)
    ##
    # Convert daily min/max values stream to hourly values stream.
    # Uses Beck &amp; Trevitt method with default A/B/G values.
    #
    # @param    w               daily min/max values weather stream, columns:
...
</code></pre>
<p>Since our minmax data includes a UTC offset (<code>timezone</code>) column, we can leave the timezone option as default. Daily precipitation is placed at one hour of each day, controlled by the <code>prec_hr</code> parameter. By default it is placed at the calculated hour of sunrise, but an integer hour can be specified instead.</p>
<pre><code class="language-py">hourly = minmax_to_hourly(minmax)
</code></pre>
<pre><code class="language-py">########
FWI2025: Make Hourly Inputs (YYYY-MM-DD)

Predicting hourly weather at PRF for 2007
########
</code></pre>
<p>The output columns should include everything required to run <code>hFWI()</code>.</p>
<pre><code class="language-py">print(hourly.columns)
</code></pre>
<pre><code class="language-py">Index(['id', 'lat', 'long', 'timezone', 'yr', 'mon', 'day', 'hr', 'temp', 'rh',
       'ws', 'prec'],
      dtype='object')
</code></pre>
<p>Print the first 24 hours of hourly data.</p>
<pre><code class="language-py">print(hourly.head(24).loc[:, &quot;yr&quot;:])
</code></pre>
<pre><code class="language-py">      yr  mon  day  hr     temp       rh       ws  prec
0   2007    5   11   0   9.0497  79.2894   6.0236   0.0
1   2007    5   11   1   8.2408  82.7490   5.5602   0.0
2   2007    5   11   2   7.5821  85.5521   5.1519   0.0
3   2007    5   11   3   7.0456  87.8233   4.7922   0.0
4   2007    5   11   4   6.6087  89.6634   4.4754   0.0
5   2007    5   11   5   6.2529  91.1543   4.1963   0.0
6   2007    5   11   6   5.2016  97.3083   3.9504   0.5
7   2007    5   11   7   7.0357  89.1380   2.9910   0.0
8   2007    5   11   8   8.8135  81.1794   6.0672   0.0
9   2007    5   11   9  10.4922  73.6335   8.9872   0.0
10  2007    5   11  10  12.0316  66.6910  11.6353   0.0
11  2007    5   11  11  13.3946  60.5271  13.9063   0.0
12  2007    5   11  12  14.5485  55.2976  15.7102   0.0
13  2007    5   11  13  15.4655  51.1346  16.9754   0.0
14  2007    5   11  14  16.1237  48.1433  17.6516   0.0
15  2007    5   11  15  16.5071  46.3991  17.7121   0.0
16  2007    5   11  16  16.6067  45.9461  17.1545   0.0
17  2007    5   11  17  16.4199  46.7958  16.0008   0.0
18  2007    5   11  18  15.9513  48.9268  14.2969   0.0
19  2007    5   11  19  15.2122  52.2851  12.1104   0.0
20  2007    5   11  20  14.2203  56.7860   9.5280   0.0
21  2007    5   11  21  11.9971  59.6863   7.7465   0.0
22  2007    5   11  22   9.2897  60.3596   6.9610   0.0
23  2007    5   11  23   7.0858  60.9049   6.2694   0.0
</code></pre>
<p>You can save the hourly weather data as a CSV file (overrides any preexisting file).</p>
<pre><code class="language-py">hourly.to_csv(&quot;PRF2007_calculated_hourly_wx.csv&quot;, index = False)
</code></pre>
<h2 id="appendix-minmax-to-hourly-parameters">Appendix: Minmax to Hourly Parameters</h2>
<p>The process to predict hourly weather data from daily minmax data is controlled by timing and decay parameters for each weather variable. The first, alpha (α) parameter is the typical difference in time between sunrise and minimum temperature and wind speed (and maximum relative humidity). The second, beta (β) parameter is the typical difference in time between solar noon and maximum temperature and wind speed (and minimum relative humidity). The third, gamma (γ) parameter is the typical rate of exponential decay after sunset for temperature, relative humidity, and wind speed.  </p>
<p>Based on an analysis of historical weather across Canada, the default values are set as follows:</p>
<table>
<thead>
<tr>
<th>Variable \ Coefficient</th>
<th style="text-align: center;">α</th>
<th style="text-align: center;">β</th>
<th style="text-align: center;">γ</th>
</tr>
</thead>
<tbody>
<tr>
<td>Temperature</td>
<td style="text-align: center;">0.0</td>
<td style="text-align: center;">2.75</td>
<td style="text-align: center;">-1.9</td>
</tr>
<tr>
<td>Relative Humidity</td>
<td style="text-align: center;">0.25</td>
<td style="text-align: center;">2.75</td>
<td style="text-align: center;">-2.0</td>
</tr>
<tr>
<td>Wind Speed</td>
<td style="text-align: center;">1.0</td>
<td style="text-align: center;">1.5</td>
<td style="text-align: center;">-1.3</td>
</tr>
</tbody>
</table>
<p>For more information refer to <a href="https://ostrnrcan-dostrncan.canada.ca/handle/1845/347500">Appendix A of <em>The 2025 Update to the FWI System: Structure, Changes and Interpretation</em> info report</a>.  </p>
<p>In the code, these values are specified at the top of <a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/blob/main/FWI/Python/make_hourly.py"><strong>make_hourly.py</strong></a> in three dictionaries (one for each weather variable). To change the values, edit these dictionaries and save the script. Then <a href="#load-functions-and-data" target="_self"> reload the file and functions</a> (you may need to restart Python for it to register the new save).</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation générée avec <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Rechercher</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
            </div>
            <div class="modal-body">
                <p>Ici vous pouvez chercher dans les documents. Entrez votre recherche ci-dessous.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Rechercher..." id="mkdocs-search-query" title="Tapez vos mots clés ici">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="Aucun résultat trouvé"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Raccourcis Clavier</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Touches</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Ouvrir l'aide</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Page suivante</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Page précédente</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Rechercher</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
