<!DOCTYPE html>
<html lang="fr" data-bs-theme="dark">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>quotidien a horaire C - PG-MCEDIF</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" disabled>
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" >
        <link href="../../style.css" rel="stylesheet">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script>
    <base target="_blank">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=DM+Mono:wght@400&family=Roboto+Mono&display=swap');
    </style>
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <div class="container">
    <a class="navbar-brand" href="../.." target="_self">PG-MCEDIF</a>
    <a class="navbar-brand" href="../.." target="_self"> <img style="height: 40px; margin: 0px; padding: 0px;" src="/website_fr/img/CFFDRS_Black_4.png" alt="CFFDRS logo"> </img> </a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
        <!-- Main navigation -->
        <ul class="nav navbar-nav">
            <li class="nav-item">
                <a href="../../accueil/" class="nav-link" target="_self">Accueil</a>
            </li>
            <li class="nav-item">
                <a href="../../code/" class="nav-link" target="_self">Code</a>
            </li>
            <li class="nav-item">
                <a href="../" class="nav-link active" target="_self">Tutoriels</a>
            </li>
            <li class="nav-item">
                <a href="../../ressources/" class="nav-link" target="_self">Ressources</a>
            </li>
            <li class="nav-item">
                <a href="../../contact/" class="nav-link" target="_self">Contact</a>
            </li>
        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Rechercher
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <script src="../../js/darkmode.js"></script>

        <div class="container">
            <div class="row">
    <!-- Construction Sign -->
    <style>
        div.construction p {
            text-align: center;
            font-family: Times;
            font-size: 16px;
            font-style: normal;
            font-weight: bold;
            text-decoration: none;
            text-transform: uppercase;
        }
    </style>

    <!-- <div class="construction">
        <p>Le site Web est toujours en développement. Les problèmes ou commentaires peuvent être envoyés à <a href="mailto:kevin.siu@nrcan-rncan.gc.ca" target="_self">kevin.siu@nrcan-rncan.gc.ca</a></p>
    </div> -->
    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table des matières">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1">
                    <a href="#" class="nav-link" target="_self"> (Début) </a>
                <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2">
                    <a href="#c-files" class="nav-link" target="_self">C files</a>
                <ul class="nav flex-column">
                </ul>
            </li>
            <li class="nav-item" data-bs-level="2">
                    <a href="#data" class="nav-link" target="_self">Data</a>
                <ul class="nav flex-column">
                </ul>
            </li>
            <li class="nav-item" data-bs-level="2">
                    <a href="#steps" class="nav-link" target="_self">Steps</a>
                <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="3">
                    <a href="#open-a-terminal" class="nav-link" target="_self">Open a terminal</a>
                <ul class="nav flex-column">
                </ul>
            </li>
            <li class="nav-item" data-bs-level="3">
                    <a href="#compile-make_minmax-and-make_hourly" class="nav-link" target="_self">Compile make_minmax and make_hourly</a>
                <ul class="nav flex-column">
                </ul>
            </li>
            <li class="nav-item" data-bs-level="3">
                    <a href="#convert-daily-to-minmax" class="nav-link" target="_self">Convert daily to minmax</a>
                <ul class="nav flex-column">
                </ul>
            </li>
            <li class="nav-item" data-bs-level="3">
                    <a href="#convert-minmax-to-hourly" class="nav-link" target="_self">Convert minmax to hourly</a>
                <ul class="nav flex-column">
                </ul>
            </li>
                </ul>
            </li>
            <li class="nav-item" data-bs-level="2">
                    <a href="#appendix-minmax-to-hourly-parameters" class="nav-link" target="_self">Appendix: Minmax to Hourly Parameters</a>
                <ul class="nav flex-column">
                </ul>
            </li>
                </ul>
            </li>
        </ul>
    </div>
</div></div>
    <div class="col-md-9" role="main">

<p><a href="../../tutoriels#daily-to-hourly" target="_self" style="float: left;"> retour à Tutoriels </a>
<a href="https://cffdrs.github.io/website_en/tutorials/Daily_to_Hourly_C" target="_self" style="float: right;"> English </a></p>
<h3 style="text-align: center; font-style: italic;"> Traduction en cours </h3>

<p><br></p>
<h1 id="daily-to-hourly-tutorial-c">Daily to Hourly Tutorial - C</h1>
<p><em>Last updated: February 27th, 2026</em></p>
<h2 id="c-files">C files</h2>
<p>This tutorial will show you how to compile C code and run the executable in a Windows environment. This can be done in PowerShell or Command Prompt, which are included with Windows. The tutorial code and file are written in PowerShell, although the commands in this tutorial can be used for either.  </p>
<p>The following files can be found on the <a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/tree/main">cffdrs-ng GitHub repository</a>:  </p>
<ul>
<li>data/<ul>
<li><a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/blob/main/data/PRF2007_daily_wx_C-format.csv"><strong>PRF2007_daily_wx_C-format.csv</strong></a></li>
</ul>
</li>
<li>FWI/<ul>
<li>C/<ul>
<li>tutorial/<ul>
<li><a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/blob/main/FWI/C/tutorial/tutorial_daily_to_hourly.ps1"><strong>tutorial_daily_to_hourly.ps1</strong></a></li>
</ul>
</li>
<li><a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/blob/main/FWI/C/make_hourly.c"><strong>make_hourly.c</strong></a></li>
<li><a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/blob/main/FWI/C/make_minmax.c"><strong>make_minmax.c</strong></a></li>
<li><a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/blob/main/FWI/C/util.c"><strong>util.c</strong></a></li>
<li><a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/blob/main/FWI/C/util.h"><strong>util.h</strong></a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>If you are unfamiliar with GitHub, there are many options for you to retrieve the code and data files:</p>
<ol>
<li><em>Download each file</em> to your computer individually. On the file's GitHub page (e.g. <a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/blob/main/data/PRF2007_daily_wx.csv"><strong>PRF2007_daily_wx_C-format.csv</strong></a>), find the "More file actions" button at the top-right side of the website (denoted "..."), and select "Download". This will begin downloading based on your browser settings. Repeat this for every file.</li>
<li><em>Download the whole repository</em> to your computer. See the <a href="https://docs.github.com/en/get-started/start-your-journey/downloading-files-from-github">GitHub documentation</a> for more information.</li>
<li><em>Clone</em> the whole repository to your computer with Git. See the <a href="https://docs.github.com/en/get-started/start-your-journey/downloading-files-from-github">GitHub documentation</a> for more information.</li>
<li><em>Fork</em> the repository to create a new repository on GitHub. See the <a href="https://docs.github.com/en/get-started/start-your-journey/downloading-files-from-github">GitHub documentation</a> for more information.</li>
</ol>
<h2 id="data">Data</h2>
<p><strong>NOTE: The C version can only handle one station for one continuous season at a time!</strong> See the Python or R versions to be able to run multiple stations with multiple years at once.  </p>
<p><strong>PRF2007_daily_wx_C-format.csv</strong> contains daily weather which was reduced from hourly data specifically for this tutorial. Temperature, relative humidity, and wind speed data are taken from noon Local Standard Time (LST), or in this case the equivalent 13:00 Local Daylight Time (LDT). Hourly precipitation is summed over 24 hours ending at the same hour as the other weather variables. The original hourly data is from a Petawawa Research Forest (PRF) weather station during the 2007 field season. The data has no gaps and is sorted sequentially by time, which are requirements for the input data.</p>
<p>Columns that are included and required for converting daily weather data to daily high and low (minmax) data are: year (<code>yr</code>), month (<code>mon</code>), day (<code>day</code>), temperature [°C] (<code>temp</code>), relative humidity [%] (<code>rh</code>), wind speed [km/h] (<code>ws</code>), and daily precipitation [mm] (<code>prec</code>).</p>
<p>Columns that are required for converting daily minmax data to hourly data are: the output columns from converting daily to minmax, latitude [DD] (<code>lat</code>), and longitude [DD] (<code>long</code>).</p>
<p>The <strong>C-format</strong> version differs from <a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/blob/main/data/PRF2007_daily_wx.csv"><strong>PRF2007_daily_wx.csv</strong></a> due to the strict requirements in the C version for column names, order, and case.</p>
<h2 id="steps">Steps</h2>
<h3 id="open-a-terminal">Open a terminal</h3>
<p>To run the C code in Windows, it first needs to be compiled into an executable (.exe) file. This can be done in <a href="https://aka.ms/terminal">Windows Terminal</a>, which is a default Windows application.  </p>
<p>By default, it should open a Windows PowerShell tab/profile where we will run commands for the rest of the tutorial. First, notice that the path next to the prompt should be to your Windows user folder.</p>
<pre><code class="language-ps">PS C:\Users\username&gt;
</code></pre>
<p>Navigate from here to the folder where the .c and .h code files are located with <code>cd</code> (change directory) and <code>dir</code> (list current directory contents) commands. Otherwise, you will need to specify the location of each file every time one is called.  </p>
<p>Open the <strong>tutorial_daily_to_hourly.ps1</strong> code file. You can either follow the code and comments in the file or continue on this page (both include the same code and content).</p>
<h3 id="compile-make_minmax-and-make_hourly">Compile make_minmax and make_hourly</h3>
<p>To predict minmax weather data from daily data, the code files to compile are: <strong>make_minmax.c</strong> and <strong>util.c</strong>. The corresponding <strong>util.h</strong> header file needs to be in the same folder, but does not need to be invoked directly. One compiler option is <a href="https://gcc.gnu.org/"><code>gcc</code></a></p>
<pre><code class="language-ps">gcc -o daily_to_minmax make_minmax.c util.c
</code></pre>
<p>The prompt should return with no comments if the code was compiled successfully, and a new file should be created in the current folder named <strong>daily_to_minmax.exe</strong>. The name of the executable (.exe) file is specified after the <code>-o</code> option above.  </p>
<p>To predict hourly weather data from minmax data, the code files to compile are: <strong>make_hourly.c</strong> and <strong>util.c</strong>.</p>
<pre><code class="language-ps">gcc -o minmax_to_hourly make_hourly.c util.c
</code></pre>
<h3 id="convert-daily-to-minmax">Convert daily to minmax</h3>
<p>Details about the <strong>daily_to_minmax.exe</strong> file can be found by running the compiled executable with no arguments.</p>
<pre><code class="language-ps">./daily_to_minmax.exe
</code></pre>
<pre><code class="language-ps">########
help/usage:
path\to\code\folder\daily_to_minmax.exe input output [silent]

argument descriptions:
input        Input csv data file
output       Output csv file name and location
silent       Suppresses informative print statements (default false)
########
</code></pre>
<p>Now converting daily weather data to minmax.</p>
<pre><code class="language-ps">./daily_to_minmax.exe ../../data/PRF2007_daily_wx_C-format.csv
    ../../data/PRF2007_dailyminmax_out.csv
</code></pre>
<pre><code class="language-ps">########
FWI2025: Make Min/Max Inputs (YYYY-MM-DD)

Opening input file &gt;&gt;&gt; ../../data/PRF2007_daily_wx_C-format.csv
Saving outputs to file &gt;&gt;&gt; ../../data/PRF2007_dailyminmax_out.csv

Predicting daily min/max weather
########
</code></pre>
<p>This will place our outputs in a new CSV file called <strong>PRF2007_dailyminmax_out.csv</strong>.</p>
<blockquote>
<p>Tip: if the CSV data file is in a different folder than the code and executable file, you can specify a relative path with ".." indicating one folder up in the hierarchy. In the case of the <a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/tree/main">cffdrs-ng GitHub repository</a> structure, from the <strong>C</strong> folder the relative path of the data file can be specified as <strong>../../data/PRF2007_daily_wx_C-format.csv</strong>, which is shown above. This indicates to go up one folder to <strong>FWI</strong>, and then another folder to <strong>cffdrs-ng</strong> where the <strong>data</strong> folder and file resides.</p>
</blockquote>
<h3 id="convert-minmax-to-hourly">Convert minmax to hourly</h3>
<p>Details about the <strong>minmax_to_hourly.exe</strong> file can be found by running the compiled executable with no arguments.</p>
<pre><code class="language-ps">./minmax_to_hourly.exe
</code></pre>
<pre><code class="language-ps">########
help/usage:
path\to\code\folder\minmax_to_hourly.exe input output timezone [prec_hr] [silent]

argument descriptions:
input        Input csv data file
output       Output csv file name and location
timezone     UTC offset
prec_hr      Hour when daily precipitation occurs (default sunrise)
silent       Suppresses informative print statements (default false)
########
</code></pre>
<p>The UTC offset for the sample PRF2007 dataset is -4 (for Eastern Daylight Time). Daily precipitation is placed at one hour of each day, controlled by the <code>prec_hr</code> parameter. By default it is placed at the calculated hour of sunrise, but an integer hour can be specified instead.</p>
<pre><code class="language-ps">./minmax_to_hourly.exe ../../data/PRF2007_dailyminmax_out.csv
    ../../data/PRF2007_hourly_out.csv -4
</code></pre>
<pre><code class="language-ps">########
FWI2025: Make Hourly Inputs (YYYY-MM-DD)

Opening input file &gt;&gt;&gt; ../../data/PRF2007_hourly_out.csv   
Saving outputs to file &gt;&gt;&gt; ../../data/PRF2007_hourly_out.csv

Predicting hourly weather
########
</code></pre>
<p>This will place our outputs in a new CSV file called <strong>PRF2007_hourly_out.csv</strong>.</p>
<h2 id="appendix-minmax-to-hourly-parameters">Appendix: Minmax to Hourly Parameters</h2>
<p>The process to predict hourly weather data from daily minmax data is controlled by timing and decay parameters for each weather variable. The first, alpha (α) parameter is the typical difference in time between sunrise and minimum temperature and wind speed (and maximum relative humidity). The second, beta (β) parameter is the typical difference in time between solar noon and maximum temperature and wind speed (and minimum relative humidity). The third, gamma (γ) parameter is the typical rate of exponential decay after sunset for temperature, relative humidity, and wind speed.  </p>
<p>Based on an analysis of historical weather across Canada, the default values are set as follows:</p>
<table>
<thead>
<tr>
<th>Variable \ Coefficient</th>
<th style="text-align: center;">α</th>
<th style="text-align: center;">β</th>
<th style="text-align: center;">γ</th>
</tr>
</thead>
<tbody>
<tr>
<td>Temperature</td>
<td style="text-align: center;">0.0</td>
<td style="text-align: center;">2.75</td>
<td style="text-align: center;">-1.9</td>
</tr>
<tr>
<td>Relative Humidity</td>
<td style="text-align: center;">0.25</td>
<td style="text-align: center;">2.75</td>
<td style="text-align: center;">-2.0</td>
</tr>
<tr>
<td>Wind Speed</td>
<td style="text-align: center;">1.0</td>
<td style="text-align: center;">1.5</td>
<td style="text-align: center;">-1.3</td>
</tr>
</tbody>
</table>
<p>For more information refer to <a href="https://ostrnrcan-dostrncan.canada.ca/handle/1845/347500">Appendix A of <em>The 2025 Update to the FWI System: Structure, Changes and Interpretation</em> info report</a>.  </p>
<p>In the code, these values are specified at the top of <a href="https://github.com/nrcan-cfs-fire/cffdrs-ng/blob/main/FWI/C/make_hourly.c"><strong>make_hourly.c</strong></a> in three double arrays (one for each weather variable). To change the values, edit these arrays and save the script. Then <a href="#compile-make_minmax-and-make_hourly" target="_self"> recompile <strong>make_hourly.c</strong></a>.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation générée avec <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Rechercher</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
            </div>
            <div class="modal-body">
                <p>Ici vous pouvez chercher dans les documents. Entrez votre recherche ci-dessous.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Rechercher..." id="mkdocs-search-query" title="Tapez vos mots clés ici">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="Aucun résultat trouvé"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Raccourcis Clavier</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fermer"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Touches</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Ouvrir l'aide</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Page suivante</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Page précédente</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Rechercher</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
